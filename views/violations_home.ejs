<!DOCTYPE html>
<html lang="en">
<head>
    <title>Violation System</title>
    <link rel="stylesheet" href="/stylesheets/ViewStyle.css"/>
    <script type="text/javascript">
        function preventBack() { window.history.forward(); }
        setTimeout("preventBack()", 0);
        window.onunload = function () { null };
    </script>
</head>
<body>
<div class="PSU">
    <img id="psuShield" src="/images/psuShield.jpg" alt="*Lion*" width="75" height="75" align="left">
    <h1 id="psuText">PennState</h1>
</div>

<div id="nav">
    <section class="nav_menu" id="navsec">
        <a href="http://localhost:3000/violations_home" class="nav_page">View Violations</a>
        <a href="http://localhost:3000/violations_weekly">View Report</a>
        <a href="http://localhost:3000/control_access">Control Access</a>
        <a href="http://localhost:3000/logout">Logout</a>
    </section>
</div>

<form action="http://localhost:3000/violations_home" method="post">
    <select class="dropdown" name="filter" id="filter" onchange="this.form.submit()">
        <option value="filter">Data Filter</option>
        <option value="none">No Filter</option>
        <optgroup label="Violation Type">
            <option value="Mask">Mask</option>
            <option value="Fever">Fever</option>
        </optgroup>
        <optgroup label="Location">
            <option value="AMIC">AMIC</option>
            <option value="Burke">Burke</option>
            <option value="Library">Library</option>
            <option value="Nick">Nick</option>
        </optgroup>
    </select> 
</form>

<p class="noticeText"><%= vioMsg %></p>

<script>
    function showInfo(time, date, loc, type, img) {
        var infoStr = `${time} | ${date} | ${loc} | ${type}`;
        document.getElementById('vioInfo').innerHTML = infoStr;
        document.getElementById('vioImg').src = img;
    }
</script>

<div>
    <div class="Wrapper">
      <div class="RightContent">
        <p id="vioInfo">Click a button to see more information about a specific violation.</p>
        <img id="vioImg" alt="An image of the violator will be displayed as well." height="80%" width="50%">
      </div>
      <div class="LeftContent">
        <% for (var i in vios) { %>
            <button type="button" class="btn" onclick="showInfo('<%= vios[i].time %>', '<%= vios[i].date %>', '<%= vios[i].location %>', '<%= vios[i].violationType %>', '<%= vios[i].imageUrl %>')"><%= vios[i].time %> | <%= vios[i].date %></button>
        <% } %>
      </div>
    </div>
</div>

</body>
</html>